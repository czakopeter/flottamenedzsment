<!DOCTYPE html>
<html lang="en" layout:decorate="~{layouts/main}">
<head>
<title>Flotta</title>
</head>
<body>

  <div layout:fragment="loginContent">
  
    <h3 class="uppercase" th:text="#{invoiceDetails}">Invoice details</h3>
  
    <h4 class="uppercase" th:text="#{invoice.sender}">Sender</h4>

    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{name}">Company name</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.company.name}"></label>
      </div>
    </div>
    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{participant.address}">Address</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.company.address}"></label>
      </div>
    </div>

    <h4 class="uppercase" th:text="#{invoiceSummary}">Invoice summary</h4>

    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{invoice.invoiceNumber}">Invoice number</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.invoiceNumber}">Invoice number</label>
      </div>
    </div>
    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{invoice.from}">From</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.beginDate}">Begin date</label>
      </div>
    </div>
    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{invoice.to}">To</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.endDate}">End date</label>
      </div>
    </div>
    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{invoice.netAmount}">Net amount</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.invoiceNetAmount} + ' Ft'">Net amount</label>
      </div>
    </div>
    <div class="row my-2">
      <div class="col-2">
        <label th:text="#{invoice.taxAmount}">Tax amount</label>
      </div>
      <div class="col-8">
        <label th:text="${invoice.invoiceTaxAmount} + ' Ft'">Tax amount</label>
      </div>
    </div>

    <h4 class="uppercase" th:text="#{invoiceDetails}">Invoice details</h4>

    <div th:each="partOfInvoice : ${invoice.invoicePart}">
      <a class="noneunderline"
        th:href="'#' + ${partOfInvoice?.subscription?.number} + ${partOfInvoice.user != null ? partOfInvoice.user.fullName : 'Company'}"
        data-toggle="collapse" aria-expanded="false" role="button" onclick="change(this)"
      >
        <table class="table table-sm">
          <thead>
            <tr>
              <td th:text="${partOfInvoice?.subscription?.number} + ' - ' + ${partOfInvoice.user != null ? partOfInvoice.user.fullName : 'Company'}"></td>
              <td th:text="${#numbers.formatDecimal(partOfInvoice.totalGrossAmount, 1, 2)} + ' Ft'"></td>
              <td class="text-right">
                <button class="btn btn-sm" style="background-color: transparent;">
                  <img src="/img/down-arrow.png" alt="down-arrow" />
                </button>
              </td>
            </tr>
          </thead>
        </table>
      </a>
      <div
        th:id="${partOfInvoice?.subscription?.number} + ${partOfInvoice.user != null ? partOfInvoice.user.fullName : 'Company'}"
        class="collapse" style="margin-left: 15px; margin-right: 15px;"
      >
        <table class="table table-sm">
          <thead>
            <tr>
              <th>Description</th>
              <th>Period</th>
              <th class="text-right">Total gross</th>
              <th class="text-right">User gross</th>
              <th class="text-right">Comp. gross</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="feeItem : ${partOfInvoice.fees}">
              <td name="description" th:text="${feeItem.description}"></td>
              <td name="period" th:text="${feeItem.getPeriod()}"></td>
              <td class="text-right" name="totalGrossAmount"
                th:text="${#numbers.formatDecimal(feeItem.totalGrossAmount, 1, 2)} + ' Ft'"
              ></td>
              <td class="text-right" name="userGrossAmount"
                th:text="${#numbers.formatDecimal(feeItem.userGrossAmount, 1, 2)} + ' Ft'"
              ></td>
              <td class="text-right" name="compGrossAmount"
                th:text="${#numbers.formatDecimal(feeItem.companyGrossAmount, 1, 2)} + ' Ft'"
              ></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>


    <a href="/invoice/all" class="btn btn-primary" th:text="#{button.back}">Back</a>

    <script src="/js/invoice/invoiceDetails.js"></script>


  </div>
</body>
</html>